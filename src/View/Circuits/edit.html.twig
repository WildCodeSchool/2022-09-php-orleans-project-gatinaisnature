{% extends 'layoutAdmin.html.twig' %}

{% block stylesheet %}
	<link rel="stylesheet" href="/assets/css/circuits.css">
{% endblock %}

{% block title %}
	{{ parent() }}
	| Éditer Circuits
{% endblock %}

{% block content %}
	<section class="section-form">
		<div class="container h-100">
			<div class="row d-flex justify-content-center align-items-center h-100">
				<div class="col col-xl-10">
					<div class="card shadow-lg">
						<div class="row g-0">
							<div class="col-md-6 col-lg-5 d-block custom-block">
								{% if circuit.picture == null %}
									<img class="w-100 h-100" src="/assets/images/imgPlaceHolder.jpg" alt="Image du circuit">
								{% else %}
									<img class="w-100 h-100" src={{ circuit.picture|trim('.')}} alt="Image du circuit">
								{% endif %}
							</div>
							<div class="col-md-6 col-lg-7 m-auto d-flex align-items-center">
								<div class="card-body p-4 p-lg-5 text-black">

									<form action="" method="post" enctype="multipart/form-data">
										<input type="hidden" value="{{ circuit.id }}" name="id">
										{% if errors %}
											<ul class="alert alert-danger" role="alert">
												{% for error in errors %}
													<li class="list-unstyled">
														<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewbox="0 0 16 16">
															<path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
														</svg>
														{{error}}
													</li>
												{% endfor %}
											</ul>
										{% endif %}
										<div class="d-flex align-items-center mb-5 pb-1">
											<span class="h1 fw-bold mb-0">Éditer circuit admin</span>
										</div>

										<div class="mb-4">
											<label for="title" class="form-label">Titre</label>
											<input type="text" name="title" id="title" class="form-control form-control-lg" placeholder="Canal de Briare" value="{{circuit.title ?? ''}}" required>
										</div>

										<div class="mb-4">
											<label for="size" class="form-label">Longueur (en km)</label>
											<input type="text" class="form-control form-control-lg" name="size" id="size" placeholder="7.0" value="{{circuit.size ?? ''}}" required>
										</div>

										<div class="mb-4">
											<label class="form-label" for="content">Description</label>
											<textarea class="form-control form-control-lg" name="content" id="content" placeholder="Description du circuit..." required>
												{{- circuit.content ?? '' -}}
											</textarea>
										</div>

										<div class="mb-4">
											<label class="form-label" for="trace">Tracé</label>
											<input type="text" class="form-control form-control-lg" name="trace" id="trace" placeholder="Orange" value="{{circuit.trace ?? ''}}" required>
										</div>

										<div class="mb-4">
											<label for="picture" class="form-label">Images</label>
											<input type="file" name="picture" id="picture" class="form-control form-control-lg" value="{{circuit.picture ?? ''}}" required>
										</div>

										<div class="mb-4">
											<label class="form-label" for="organisms">Espèces visibles sur le circuit</label>
											<select class="form-select form-select-lg" name="organisms" id="organisms" aria-label="Default select example" multiple required>
												<option selected>Gardez la touche Ctrl appuyée pour choisir plusieurs espèces :</option>
												{% for organism in organisms %}
													<option value="{{ organism.id }}">{{ organism.name }}</option>
												{% endfor %}
											</select>
										</div>

										<div class="mb-4">
											<label class="form-label" for="landscapes">Paysages visibles sur le circuit</label>
											<select class="form-select form-select-lg" name="landscapes" id="landscapes" aria-label="Default select example" multiple required>
												<option selected>Gardez la touche Ctrl appuyée pour choisir plusieurs paysages :</option>
												{% for landscape in landscapes %}
													<option value="{{ landscape.id }}">{{ landscape.title }}</option>
												{% endfor %}
											</select>
										</div>

										<div class="pt-1 mb-4">
											<button class="btn btn-success btn-lg btn-block" type="submit">Mettre à jour</button>
											<a class="btn btn-outline-success btn-lg btn-block" href="/admin/circuits/index">Retour</a>
										</div>

									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
{% endblock %}
